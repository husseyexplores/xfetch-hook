var xfetch=(()=>{var T=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var S=Object.prototype.hasOwnProperty;var v=(e,n)=>{for(var s in n)T(e,s,{get:n[s],enumerable:!0})},C=(e,n,s,u)=>{if(n&&typeof n=="object"||typeof n=="function")for(let l of _(n))!S.call(e,l)&&l!==s&&T(e,l,{get:()=>n[l],enumerable:!(u=A(n,l))||u.enumerable});return e};var D=e=>C(T({},"__esModule",{value:!0}),e);var N={};v(N,{fetchHook:()=>L,xhrHook:()=>j});var X=e=>{if(/^https?/.test(e))return e;let n=window.location.protocol+"//"+window.location.host;return e[0]==="/"?n+e:n+window.location.pathname+"/"+e},E=e=>[...e.entries()].reduce((n,[s,u])=>(n[s]=u,n),{}),U=e=>new URL(e),P=(e,n,s=null)=>e.reduce((u,l)=>l.call(s,u),n);function L({namespace:e=globalThis||window,fetch:n=e.fetch}={}){if(e==null&&(e=globalThis||window),typeof e!="object")throw new Error("[xfetch-hook] - `namespace` should be an object");if(typeof n!="function")throw new Error("[xfetch-hook] - `fetch` should be a function");if(typeof n.onRequest=="function")return n.stopIntercepting;let s="fetch",u=[];async function l(...t){let a=[],d=[],p=new Request(...t),b=null,w=null,R=null,x=null;for(let y of u){let i=await y({request:p,fetch:n,get url(){return R||(R=U(p.url))},get headers(){return x||(x=E(p.headers))}});!i||(i.request instanceof Request&&(p=i.request),i.response instanceof Response&&(b=i.response),typeof i.listen=="function"&&a.push(i.listen),typeof i.as=="string"&&(w=i.as,typeof i.transformResponse=="function"&&d.push(i.transformResponse)))}async function m(y){let i=y,g=w&&typeof y[w]=="function",f=await(g&&y.clone()[w]());if(d.length>0){let o=P(d,f);typeof o!="string"&&(o=JSON.stringify(o)),i=new Response(o,{status:y.status,statusText:y.statusText,headers:y.headers})}return a.forEach(o=>{let h=i.clone();g?h[w]().then(o.bind(null,h)):o(h)}),i}return b?m(b):n(p).then(m)}Object.defineProperty(l,"name",{value:s,configurable:!0});function H(){e[s]=l}H();function q(){e[s]=n}function M(t){u=u.filter(a=>a!==t)}function r(t){u.push(t)}return l.stopProxying=q,l.onRequest=function(a){if(typeof a!="function")throw new Error("[xfetch-hook] - `onRequest`: argument must be a function");let d=()=>M(a);return u.find(b=>b===a)||r(a),d},q}function j({namespace:e=globalThis||window}={}){if(e==null&&(e=globalThis||window),typeof e!="object")throw new Error("[xfetch-hook] - `namespace` should be an object");let n=e.XMLHttpRequest;if(typeof n!="function")throw new Error("[xfetch-hook] - `XMLHttpRequest` should be a function.");let s=[];function u(){let r=new n,t=this,a,d,p,b,w,R,x,m,y=[],i=[];this.onreadystatechange=null,r.onreadystatechange=function(){if(p&&this.readyState==4){let f=r.responseType;try{t.response=m||(m=P(y,r.response,t)),(f===""||f==="text")&&(t.responseText=r.responseText),i.forEach(o=>o.call(t,t.response,t))}catch(o){console.warn("Error in proxied xfetch-hook package",o.message)}}if(t.onreadystatechange)return t.onreadystatechange()},["status","statusText","readyState","responseXML","upload"].forEach(function(f){Object.defineProperty(t,f,{get:function(){return r[f]}})}),["ontimeout, timeout","withCredentials","onload","onerror","onprogress","responseType"].forEach(function(f){Object.defineProperty(t,f,{get:function(){return r[f]},set:function(o){f==="onload"&&typeof o=="function"&&(o=o.bind(t)),r[f]=o}})}),["addEventListener","abort","getAllkeyResponseHeaders","getAllResponseHeaders","getResponseHeader","overrideMimeType"].forEach(function(f){Object.defineProperty(t,f,{value:function(){return r[f].apply(r,arguments)}})});let g=new Headers;t.setRequestHeader=function(o,h){g.append(o,h)},t.open=function(o,h,c,O,k){a=o,d=new URL(X(h)),p=c!==!1,b=O,w=k,r.open(a,d.toString(),p,b,w)},t.send=async function(o){if(R=o,p){for(let h of s){let c=await h({method:a,url:d,body:R,get headers(){return x||(x=E(g))}});!c||(c.method&&(a=c.method),c.url&&(d=c.url.href||c.url),c.body!==void 0&&(R=c.body),c.headers instanceof Headers&&(g=c.headers),typeof c.transformResponse=="function"&&y.push(c.transformResponse),typeof c.listen=="function"&&i.push(c.listen))}r.open(a,d,p,b,w);for(let h of g.entries())r.setRequestHeader(h[0],h[1])}r.send(R)}}Object.defineProperty(u,"name",{value:"XMLHttpRequest",configurable:!0});function l(){e.XMLHttpRequest=u}l();function H(){e.XMLHttpRequest=n}function q(r){s=s.filter(t=>t!==r)}function M(r){s.push(r)}return u.stopProxying=H,u.onRequest=function(t){if(typeof t!="function")throw new Error("[onRequest] - Argument must be a function");let a=()=>q(t);return s.find(p=>p===t)||M(t),a},H}return D(N);})();
